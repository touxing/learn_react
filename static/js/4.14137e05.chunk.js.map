{"version":3,"sources":["components/SVGSymbol/index.jsx","pages/Home/components/TopTitle/index.jsx","pages/Home/components/Category/index.jsx","utils/index.js","pages/Home/components/Banner/index.jsx","pages/Home/components/GoodsCard/index.jsx","pages/Home/components/HomeGoods/index.jsx","pages/Home/index.js"],"names":["svg","props","React","createElement","className","aria-hidden","style","fontSize","xlinkHref","concat","name","TopTitle","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","topSearchComp","map","item","key","toolbar","icon","index","Fragment","SVGSymbol","_createClass","value","this","Component","Category","categories","from","id","processData","i","push","slice","Swiper","spaceBetween","slidesPerView","height","pagination","clickable","modifierClass","containerModifierClass","category","SwiperSlide","onClick","console","log","SwiperCore","use","Navigation","Pagination","Scrollbar","A11y","random","min","undefined","max","Math","floor","getUrlWithBasename","url","basename","banners","img","link","Link","to","src","alt","_props$item","useEffect","title","perCapita","salePerMonth","renderTabBar","Sticky","_ref","_objectSpread","zIndex","_Tabs","DefaultTabBar","tabs","tabsKeys","Object","values","HomeGoods","screenChange","getMacy","masonryMap","state","has","get","reInit","masonry","Macy","container","trueOrder","waitForImages","useOwnImageLoader","debug","margin","x","y","columns","set","setState","recalcMacy","fn","lastFn","lastTime","wait","immediate","inThrottle","context","clearTimeout","setTimeout","Date","now","throttled","recalculate","renderTabContent","info","repeat","GoodsCard","waterFallBoxRef","createRef","waterFallBoxRefList","currentKey","currentTabIndex","Map","_this$state","_this2","_WhiteSpace","StickyContainer","initialPage","onChange","tab","onTabClick","ref","element","Home","Banner"],"mappings":"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","file":"static/js/4.14137e05.chunk.js","sourcesContent":["import React from 'react'\n\nexport default function svg(props) {\n  return (\n    <svg className=\"icon\" aria-hidden=\"true\" style={{fontSize: props.fontSize+'px'}}>\n      <use xlinkHref={`#icon-${props.name}`}></use>\n    </svg>\n  )\n}\n","import React, { Fragment } from 'react'\nimport SVGSymbol from '@/components/SVGSymbol'\nimport './index.scss'\n\nclass TopTitle extends React.Component {\n  // 顶部热搜\n  topSearchComp = () => {\n    const topSearchWords = ['真功夫', '湘菜', '限时秒杀', '美团买菜', '洗牙']\n    return (\n      <div>\n        热搜：\n        {topSearchWords.map((item) => {\n          return (\n            <span key={item} className=\"top-search__tag p-6 p-l-10 p-r-10\">{item}</span>\n          )\n        })}\n      </div>\n    )\n  }\n  toolbar = () => {\n    const toolbarList = [\n      {\n        icon: 'scanning',\n        name: '扫一扫'\n      },\n      {\n        icon: 'QRcode',\n        name: '付款码'\n      },\n      {\n        icon: 'creditcard',\n        name: '红包/卡券'\n      },\n      {\n        icon: 'aviation',\n        name: '骑车'\n      }\n    ]\n    return (\n      <div className=\"flex p-t-10 p-b-12\">\n        {toolbarList.map((item,index) => {\n          return (\n            <Fragment key={item.icon}>\n              <div className=\"flex-1 flex-column flex-center\">\n                <SVGSymbol name={item.icon} fontSize={40} />\n                <span>{item.name}</span>\n              </div>\n            </Fragment>\n          )\n        })}\n      </div>\n    )\n  }\n  render() {\n    return (\n      <div className=\"bg-primary p-l-10 p-r-10\">\n        <div className=\"flex bg-primary align-items-center home-top-title\">\n          <div className=\"flex-column align-items-center\">\n            <span>深圳</span>\n            <span className=\"f-s-10 color-3\">多云 27℃</span>\n          </div>\n          <div className=\"flex align-items-center bg-f p-l-6 search-box\">\n            <SVGSymbol name=\"search\" fontSize={24} />\n            <span>美食</span>\n          </div>\n        </div>\n        {this.topSearchComp()}\n        {this.toolbar()}\n      </div>\n    )\n  }\n}\n\nexport default TopTitle\n","import React from 'react'\nimport SVGSymbol from '@/components/SVGSymbol'\nimport SwiperCore, { Navigation, Pagination, Scrollbar, A11y } from 'swiper'\nimport { Swiper, SwiperSlide } from 'swiper/react'\nimport 'swiper/swiper.scss'\nimport 'swiper/components/navigation/navigation.scss'\nimport 'swiper/components/pagination/pagination.scss'\nimport 'swiper/components/scrollbar/scrollbar.scss'\nimport './index.scss'\n\nSwiperCore.use([Navigation, Pagination, Scrollbar, A11y])\n\nexport default function Category() {\n  const categories = Array.from({ length: 44 }, (item, index) => {\n    return {\n      id: index,\n      icon: 'aviation',\n      name: '外卖',\n    }\n  })\n  let processData = []\n  let forStep = 15\n  for (let i = 0; i < categories.length; i += forStep) {\n    processData.push(categories.slice(i, i + forStep))\n  }\n  return (\n    <Swiper\n      spaceBetween={50}\n      slidesPerView={1}\n      height={220}\n      pagination={{ clickable: true, modifierClass: 'swiper-pagination-custom ' }}\n      // onSlideChange={() => console.log('slide change')}\n      // onSwiper={(swiper) => console.log(swiper)}\n      containerModifierClass=\"swiper-container-custom \"\n    >\n      {processData.map((category, index) => {\n        return (\n          <SwiperSlide key={index}>\n            <div className=\"swiper-slide-item flex flex-wrap\">\n              {category.map((item) => {\n                return (\n                  <div\n                    key={item.id}\n                    className=\"flex-column flex-center slide-item\"\n                    onClick={(item) => {console.log(item.name)}}\n                  >\n                    <SVGSymbol name={item.icon} fontSize={40} />\n                    <span>{item.name}</span>\n                  </div>\n                )\n              })}\n            </div>\n          </SwiperSlide>\n        )\n      })}\n    </Swiper>\n  )\n}\n","import {basename} from '@/routes'\n\nexport function getClient() {\n  return {\n    width: window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\n    heihgt: window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight\n  }\n}\n\nexport function getScrollTop() {\n  return window.pageYOffset || document.documentElement.scrollTop\n}\n\n/**\n * @desc 随机数 整数\n * @param {*} min\n * @param {*} max\n * @returns\n */\nexport function random(min=0, max=1) {\n  return Math.floor(Math.random() * max) + max - min\n}\n\nexport function debounce(fn, delay) {\n  let timer = null\n\n  return function(...args) {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      fn.apply(this, args)\n    }, delay);\n  }\n}\n\nexport function throttled(fn, wait = 300, immediate=false) {\n  let inThrottle = !immediate, lastFn, lastTime\n\n  return function() {\n    let context = this,\n    args = arguments\n    if(!inThrottle) {\n      fn.apply(context, args)\n      lastTime = Date.now()\n      inThrottle = true\n    } else {\n      clearTimeout(lastFn)\n      lastFn = setTimeout(function() {\n        if(Date.now() - lastTime > wait) {\n          fn.apply(context, args)\n          lastTime = Date.now()\n        }\n      }, Math.max(wait - (Date.now() - lastTime), 0))\n    }\n  }\n}\n\n/**\n * 获取带basename的url\n * @param {string} url\n * @returns\n */\nexport function getUrlWithBasename(url) {\n  return `${basename ? basename+'/' : ''}${url}`\n\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport SwiperCore, { Pagination } from 'swiper'\nimport { Swiper, SwiperSlide } from 'swiper/react'\nimport { getUrlWithBasename } from '@/utils'\n\nimport './index.scss'\nSwiperCore.use([Pagination])\n/* eslint-disable */\nexport default function () {\n  const banners = [\n    {\n      img: getUrlWithBasename('/img/banner1.jpg'),\n      link: '/',\n    },\n    {\n      img: getUrlWithBasename('/img/banner2.jpg'),\n      link: '/discovery',\n    },\n  ]\n  return (\n    <React.Fragment>\n      <Swiper\n        spaceBetween={50}\n        slidesPerView={1}\n        height={220}\n        pagination={{\n          clickable: true,\n          modifierClass: 'swiper-pagination-custom ',\n        }}\n        // onSlideChange={() => console.log('banner slide change')}\n        // onSwiper={(swiper) => console.log(swiper)}\n        containerModifierClass=\"swiper-container-custom \"\n      >\n        {banners.map((item, index) => {\n          return (\n            <SwiperSlide key={index}>\n              <Link to={item.link}>\n                <img className=\"banner\" src={item.img} alt=\"advetisement\" />\n              </Link>\n            </SwiperSlide>\n          )\n        })}\n      </Swiper>\n    </React.Fragment>\n  )\n}\n","import {getUrlWithBasename} from '@/utils'\nimport React, {useEffect} from 'react'\nimport './index.scss'\n\nexport default function (props) {\n  let { item = {} } = props\n  useEffect(() => {\n    // console.log('GoodsCard useEffect')\n  })\n\n  return (\n    <div\n     className=\"goods-box\"\n    >\n      <img className=\"goods-img\" style={{height: item.height+'px'}} src={getUrlWithBasename(\"/img/banner1.jpg\")} alt=\"goods\"/>\n      <div className=\"p-l-6 p-r-6\">\n        <div className=\"m-b-8 f-s-16 color-black text-over-2 home-top-titl\">{ item.title }</div>\n        <div className=\"m-b-6 f-s-12 color-6 text-over-1\">评分信息</div>\n        <div className=\"m-b-6 f-s-12 color-9\">人均<span className='color-red f-s-14'>{item.perCapita}<span>&yen;</span></span> | 月销{item.salePerMonth}</div>\n        <div className=\"f-s-12 color-3 text-over-1\">满减，满减</div>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Tabs, WhiteSpace } from 'antd-mobile'\nimport { StickyContainer, Sticky } from 'react-sticky'\nimport GoodsCard from '../GoodsCard'\nimport { random, throttled } from '@/utils'\nimport './index.scss'\nimport Macy from 'macy'\n\nfunction renderTabBar(props) {\n  return (\n    <Sticky>\n      {({ style }) => (\n        <div style={{ ...style, zIndex: 1 }}>\n          <Tabs.DefaultTabBar {...props} />\n        </div>\n      )}\n    </Sticky>\n  )\n}\nconst tabs = [\n  { title: '猜你喜欢', key: 't1' },\n  { title: '今日特价', key: 't2' },\n  { title: '超好评', key: 't3' },\n]\n\nconst tabsKeys = Object.values(tabs).map((item) => item.key)\n\nexport default class HomeGoods extends React.Component {\n  constructor(props) {\n    super(props)\n    // 创建一个 ref 来存储 瀑布流box 的 DOM 元素\n    this.waterFallBoxRef = React.createRef()\n    this.waterFallBoxRefList = {} // 存放 map 中的 ref\n    this.state = {\n      currentKey: tabs[0].key,\n      currentTabIndex: tabs[0].index,\n      masonryMap: new Map(),\n    }\n  }\n  componentDidMount() {\n    this.getMacy(0)\n  }\n  componentDidUpdate() {\n    let { masonryMap, currentTabIndex } = this.state\n    setTimeout(() => {\n      if (masonryMap.has(currentTabIndex)) {\n        masonryMap.get(currentTabIndex).recalculate()\n        console.log('calculate')\n      }\n    }, 0)\n  }\n  // shouldComponentUpdate() {\n  //   return false\n  // }\n  componentWillUnmount() {\n  }\n  screenChange = () => {\n    console.log('screenChange')\n  }\n\n  // 动态渲染生成的瀑布流有问题\n  getMacy = (index) => {\n    const { masonryMap } = this.state\n    if (masonryMap.has(index)) {\n      this.state.masonryMap.get(index).reInit()\n    } else {\n      let masonry = new Macy({\n        container: `.macy-container-${index}`, // 图像列表容器\n        trueOrder: false,\n        waitForImages: false,\n        useOwnImageLoader: false,\n        debug: true,\n        margin: { x: 0, y: 6 }, // 设计列与列的间距\n        columns: 2, // 设置列数\n      })\n      masonryMap.set(index, masonry)\n      this.setState({ masonryMap })\n    }\n  }\n\n  recalcMacy = throttled((index) => {\n    console.log('recalculate')\n    if (this.state.masonryMap.has(index)) {\n      this.state.masonryMap.get(index).recalculate()\n    }\n  }, 300)\n\n  renderTabContent = (key) => {\n    return (\n      <React.Fragment>\n        {Array.from({ length: 15 }, (item, index) => {\n          let info = {\n            title: '标题标题'.repeat(random(1, 10)),\n            perCapita: random(1, 999),\n            salePerMonth: random(0, 9999),\n            height: random(150, 300),\n          }\n          return (\n            <div className=\"waterfall-item\" key={index}>\n              <GoodsCard key={index} item={info} />\n            </div>\n          )\n        })}\n      </React.Fragment>\n    )\n  }\n\n  render() {\n    const { currentKey } = this.state\n    return (\n      <div>\n        <WhiteSpace />\n        <StickyContainer>\n          <Tabs\n            className=\"bg-transparent\"\n            tabs={tabs}\n            initialPage={currentKey}\n            renderTabBar={renderTabBar}\n            onChange={(tab, index) => {\n              console.log('onChange', tab)\n              this.setState(\n                (state, props) => ({\n                  currentKey: tab.key,\n                }),\n                () => {\n                  console.log(this.state)\n                  this.getMacy(index)\n                }\n              )\n            }}\n            onTabClick={(tab, index) => {\n              console.log('onTabClick', index, tab)\n            }}\n          >\n            {tabsKeys.map((item, index) => {\n              return (\n                <div\n                  key={item}\n                  className={`waterfall-wrap macy-container-${index}`}\n                  ref={(element) => (this.waterFallBoxRefList[item] = element)}\n                >\n                  {this.renderTabContent(item)}\n                </div>\n              )\n            })}\n          </Tabs>\n        </StickyContainer>\n        <WhiteSpace />\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport TopTitle from './components/TopTitle'\nimport Category from './components/Category'\nimport Banner from './components/Banner'\nimport HomeGoods from './components/HomeGoods'\n\nclass Home extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        <TopTitle />\n        <Category />\n        <Banner />\n        <HomeGoods />\n      </React.Fragment>\n    )\n  }\n}\n\nexport default Home\n"],"sourceRoot":""}