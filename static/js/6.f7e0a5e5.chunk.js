(this.webpackJsonpmeituan=this.webpackJsonpmeituan||[]).push([[6],{300:function(t,e,a){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return i(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a.r(e);var n=a(38),l=a(39),s=a(104),o=a(41),m=a(40),h=a(0),u=a.n(h),c=function(t){Object(o.a)(a,t);var e=Object(m.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).state={imgList:[],imgArr:["https://dummyimage.com/100x70/50B347/FFF&text=100x70","https://dummyimage.com/100x80/50B347/FFF&text=100x80","https://dummyimage.com/100x90/50B347/FFF&text=100x90","https://dummyimage.com/100x100/50B347/FFF&text=100x100","https://dummyimage.com/100x120/50B347/FFF&text=100x120","https://dummyimage.com/100x150/50B347/FFF&text=100x150","https://dummyimage.com/100x210/50B347/FFF&text=100x210","https://dummyimage.com/100x230/50B347/FFF&text=100x230","https://dummyimage.com/100x250/50B347/FFF&text=100x250"],waterfallImgList:[],waterfallImgWidth:100,waterfallImgRight:10,waterfallImgBottom:10,waterfallImgCol:null,waterfallDeviationHeight:[],time:null},i.resize.bind(Object(s.a)(i)),i}return Object(l.a)(a,[{key:"componentDidMount",value:function(){for(var t=0;t<100;t++)this.state.imgList.push(this.state.imgArr[Math.round(8*Math.random())]);this.calculateWidth(),this.screenChange()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"resize",value:function(){var t=this;if(!this.state.time){var e=setTimeout((function(){clearTimeout(t.state.time),t.setState({waterfallImgCol:null,waterfallImgList:[],time:null}),t.calculateWidth()}),300);this.setState({time:e})}}},{key:"screenChange",value:function(){var t=this;window.addEventListener("resize",(function(){t.resize()}))}},{key:"calculateWidth",value:function(){var t=document.getElementById("waterfall").offsetWidth,e=parseInt(t/(this.state.waterfallImgWidth+this.state.waterfallImgRight));this.setState({waterfallImgCol:e});for(var a=new Array(e),i=0;i<e;i++)a[i]=0;this.setState({waterfallDeviationHeight:a}),this.imgPreloading()}},{key:"imgPreloading",value:function(){for(var t=this,e=function(e){var a=new Image;a.src=t.state.imgList[e],a.onload=a.onerror=function(){var i={};i.height=t.state.waterfallImgWidth/a.width*a.height,i.src=t.state.imgList[e],t.state.waterfallImgList.push(i),t.rankImg(i)}},a=0;a<this.state.imgList.length;a++)e(a)}},{key:"rankImg",value:function(t){var e=this.state,a=e.waterfallImgWidth,i=e.waterfallImgRight,r=e.waterfallImgBottom,n=e.waterfallDeviationHeight,l=this.filterMin();t.top=n[l],t.left=l*(a+i);var s=n;s[l]+=t.height+r,this.setState({waterfallDeviationHeight:s,waterfallImgList:this.state.waterfallImgList})}},{key:"filterMin",value:function(){var t=this.state.waterfallDeviationHeight,e=Math.min.apply(null,r(t));return this.state.waterfallDeviationHeight.indexOf(e)}},{key:"render",value:function(){var t=this;return u.a.createElement("div",{className:"relative waterfall",id:"waterfall"},this.state.waterfallImgList.map((function(e,a){var i=e.top,r=e.left,n=e.height,l=t.state.waterfallImgWidth;return u.a.createElement("div",{className:"absolute waterfall-item",key:a,style:{width:"".concat(l,"px"),height:n,top:"".concat(i,"px"),left:"".concat(r,"px")}},u.a.createElement("img",{src:e.src,alt:""}))})))}}]),a}(u.a.Component);e.default=c}}]);
//# sourceMappingURL=6.f7e0a5e5.chunk.js.map